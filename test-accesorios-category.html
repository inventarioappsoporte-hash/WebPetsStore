<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Categor√≠a ACCESORIOS</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .debug { background: #f8f9fa; padding: 10px; margin: 10px 0; }
        .product-item { margin: 5px 0; padding: 10px; background: #e8f5e8; border-left: 4px solid #28a745; }
        .category-info { background: #d1ecf1; padding: 15px; margin: 10px 0; border-left: 4px solid #17a2b8; }
    </style>
</head>
<body>
    <h1>üêæ Test Nueva Categor√≠a: ACCESORIOS</h1>
    
    <div class="debug" id="debug-info">
        üîÑ Cargando informaci√≥n...
    </div>
    
    <div class="test-section">
        <h2>üìã Informaci√≥n de la Nueva Categor√≠a</h2>
        <div class="category-info">
            <h3>üêæ ACCESORIOS (ID: 500)</h3>
            <p><strong>Descripci√≥n:</strong> Accesorios √∫nicos y divertidos para darle estilo y personalidad a tu mascota.</p>
            <p><strong>Filtros:</strong></p>
            <ul>
                <li>Subcategor√≠a contiene "accesorio"</li>
                <li>Tags contienen: anteojos, accesorio, moda, estilo, complemento</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>üß™ Test del Filtro ACCESORIOS</h2>
        <div id="filter-test">
            Ejecutando test...
        </div>
    </div>

    <div class="test-section">
        <h2>üìä Comparaci√≥n: Antes vs Despu√©s</h2>
        <div id="comparison">
            Analizando cambios...
        </div>
    </div>

    <script>
        async function testAccesoriosCategory() {
            const debugInfo = document.getElementById('debug-info');
            const filterTest = document.getElementById('filter-test');
            const comparison = document.getElementById('comparison');
            
            try {
                // Cargar productos
                const response = await fetch('data/products.json');
                const products = await response.json();
                
                // Cargar categor√≠as
                const categoriesResponse = await fetch('data/categories.json');
                const categories = await categoriesResponse.json();
                
                debugInfo.innerHTML = `‚úÖ ${products.length} productos cargados<br>‚úÖ ${categories.categories.length} categor√≠as cargadas`;
                
                // Verificar que la nueva categor√≠a existe
                const accesoriosCategory = categories.categories.find(c => c.id === 500);
                if (accesoriosCategory) {
                    debugInfo.innerHTML += `<br>‚úÖ Categor√≠a ACCESORIOS encontrada: ${accesoriosCategory.name}`;
                } else {
                    debugInfo.innerHTML += `<br>‚ùå Categor√≠a ACCESORIOS NO encontrada`;
                    return;
                }
                
                // Test del filtro ACCESORIOS
                const accesoriosFilter = (product) => {
                    return (product.subcategory && product.subcategory.toLowerCase().includes('accesorio')) ||
                           (product.tags && product.tags.some(tag => 
                             ['anteojos', 'accesorio', 'moda', 'estilo', 'complemento'].includes(tag.toLowerCase())
                           ));
                };
                
                const accesoriosProducts = products.filter(accesoriosFilter);
                
                let filterHtml = `<h3>üéØ Productos en ACCESORIOS: ${accesoriosProducts.length}</h3>`;
                
                if (accesoriosProducts.length > 0) {
                    accesoriosProducts.forEach(product => {
                        filterHtml += `
                            <div class="product-item">
                                <strong>‚úÖ ${product.name}</strong><br>
                                Subcategor√≠a: ${product.subcategory}<br>
                                Tags: ${product.tags.join(', ')}<br>
                                Precio: $${product.price.toLocaleString()}<br>
                                TopDiscount: ${product.topDiscount ? 'S√ç' : 'NO'}
                            </div>
                        `;
                    });
                } else {
                    filterHtml += '<p style="color: #999;">No hay productos que coincidan con el filtro ACCESORIOS</p>';
                }
                
                filterTest.innerHTML = filterHtml;
                
                // Comparaci√≥n
                const anteojosProduct = products.find(p => p.name.includes('Anteojos'));
                let comparisonHtml = '<h3>üìä An√°lisis del Producto Anteojos:</h3>';
                
                if (anteojosProduct) {
                    comparisonHtml += `
                        <div class="product-item">
                            <strong>${anteojosProduct.name}</strong><br>
                            <strong>Antes:</strong> Podr√≠a aparecer en m√∫ltiples categor√≠as gen√©ricas<br>
                            <strong>Ahora:</strong> Aparece espec√≠ficamente en ACCESORIOS<br>
                            <strong>Subcategor√≠a:</strong> ${anteojosProduct.subcategory}<br>
                            <strong>Tags relevantes:</strong> ${anteojosProduct.tags.filter(tag => 
                                ['anteojos', 'accesorio', 'moda', 'estilo'].includes(tag.toLowerCase())
                            ).join(', ')}<br>
                            <strong>¬øCoincide con filtro ACCESORIOS?</strong> ${accesoriosFilter(anteojosProduct) ? '‚úÖ S√ç' : '‚ùå NO'}
                        </div>
                    `;
                } else {
                    comparisonHtml += '<p style="color: red;">‚ùå Producto Anteojos no encontrado</p>';
                }
                
                comparison.innerHTML = comparisonHtml;
                
                debugInfo.innerHTML += `<br><br>‚úÖ NUEVA CATEGOR√çA ACCESORIOS IMPLEMENTADA`;
                debugInfo.innerHTML += `<br>üéØ Filtro espec√≠fico para accesorios de moda`;
                debugInfo.innerHTML += `<br>üòé Anteojos ahora tiene su propia categor√≠a`;
                debugInfo.innerHTML += `<br>üîç Disponible en el men√∫ de categor√≠as`;
                
            } catch (error) {
                debugInfo.innerHTML = `‚ùå Error: ${error.message}`;
                console.error('Error:', error);
            }
        }
        
        // Ejecutar test
        testAccesoriosCategory();
    </script>
</body>
</html>